package com.example.EMR;

import java.io.FileOutputStream;
import java.io.OutputStream;
import java.io.StringReader;
import java.util.List;
import java.nio.file.Path;
import java.nio.file.Paths;

import org.apache.batik.transcoder.TranscoderInput;
import org.apache.batik.transcoder.TranscoderOutput;
import org.apache.batik.transcoder.image.PNGTranscoder;
import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class EmrApplication {

	private static final Logger logger = LogManager.getRootLogger();

	public static void convertSvgPathsToSinglePng(String[] svgPathDatas, Path outputPath) throws Exception {
		// Initialize the SVG content with a suitable viewBox size
		StringBuilder svgContent = new StringBuilder(
				"<svg xmlns=\"http://www.w3.org/2000/svg\">");

		// Append each SVG path to the SVG content
		for (String svgPathData : svgPathDatas) {
			svgContent.append("<path d=\"").append(svgPathData).append("\" stroke=\"black\" fill=\"none\"/>");
		}

		// Close the SVG tag
		svgContent.append("</svg>");

		// Set up the transcoder with the desired image dimensions
		PNGTranscoder transcoder = new PNGTranscoder();
		transcoder.addTranscodingHint(PNGTranscoder.KEY_WIDTH, 1280f);
		transcoder.addTranscodingHint(PNGTranscoder.KEY_HEIGHT, 800f);

		// Read the SVG content
		try (StringReader stringReader = new StringReader(svgContent.toString());
				OutputStream outputStream = new FileOutputStream(outputPath.toFile())) {
			TranscoderInput input = new TranscoderInput(stringReader);
			TranscoderOutput output = new TranscoderOutput(outputStream);
			transcoder.transcode(input, output);
		}
	}

	public static void main(String[] args) throws Exception {

		SpringApplication.run(EmrApplication.class, args);
		Path txtFilePath = Paths.get("/media/karanjitsaha/DATA1/Semester 8/HAD/MedicalRecordService/sample.txt");
     	Path pngFilePath = Paths.get(txtFilePath.toString().replace(".txt", ".png"));
		String[] arr = {"M137.4609375,387.4716796875", "M61.484375,58.4921875 L61.484375,60.53617858886719 L61.484375,63.290496826171875 L61.484375,67.69509887695312 L61.484375,71.28636169433594 L61.484375,73.7509765625", "M64.9609375,40.474609375 L64.9609375,41.4755859375 L67.31029510498047,41.4755859375 L68.984375,45.4794921875 L68.984375,46.571563720703125 L68.984375,49.367828369140625 L68.984375,51.73576354980469 L68.984375,53.187835693359375 L68.984375,55.93147277832031 L68.984375,59.70668029785156 L68.984375,65.4241943359375 L67.79124450683594,74.61627197265625 L66.484375,81.11175537109375 L64.9609375,85.01203918457031 L63.984375,87.68037414550781 L63.984375,88.97314453125 L62.4609375,88.47265625 L60.51176452636719,88.47265625 L59.961029052734375,88.47265625 L58.984375,87.4716796875", "M92.96875,66.98828125 L93.82987976074219,67.9892578125 L101.31245422363281,67.9892578125 L116.44446563720703,67.9892578125 L128.73292541503906,67.9892578125 L137.81906127929688,65.474609375 L146.6117706298828,60.982421875 L150.03131103515625,59.4931640625 L150.95703125,59.4931640625 L151.289794921875,63.804779052734375 L152.82034301757812,71.28030395507812 L155.4890594482422,76.51976013183594 L159.2823486328125,81.78996276855469 L165.72256469726562,82.4912109375 L177.291259765625,82.18795776367188 L188.7588653564453,78.16554260253906 L199.15896606445312,73.60475158691406 L206.37884521484375,71.11607360839844 L210.18463134765625,69.478515625 L212.75390625,69.478515625 L212.96875,69.478515625 L214.05709838867188,69.478515625 L219.58197021484375,69.478515625 L233.73008728027344,65.03730773925781 L257.0628662109375,58.8115234375 L277.49993896484375,54.95320129394531 L295.7691650390625,51.4853515625 L307.631591796875,50.38121032714844 L314.60784912109375,49.9716796875 L316.6763916015625,49.9716796875 L318.203125,49.9716796875 L315.9765625,51.31004333496094 L315.9765625,52.2421875 L314.9609375,51.4853515625 L314.9609375,52.486328125 L314.9609375,55.442169189453125 L314.9609375,60.084564208984375 L313.1614074707031,71.45555114746094 L306.0125427246094,88.17257690429688 L300.62908935546875,101.1055908203125 L294.4970397949219,111.40081787109375 L291.90234375,116.02067565917969 L290.8529357910156,117.66511535644531 L298.1304626464844,104.60525512695312 L315.27569580078125,85.68035888671875 L327.44708251953125,73.79080200195312 L337.9916687011719,64.17741394042969 L343.6396179199219,58.71870422363281 L345.87060546875,58.4921875 L348.203125,58.4921875 L348.6535339355469,66.08294677734375 L349.9609375,73.31378173828125 L351.484375,76.7294921875 L352.9245910644531,79.9765625 L355.4697265625,80.59208679199219 L359.91815185546875,81.490234375 L364.7867126464844,81.490234375 L367.7610168457031,81.490234375 L369.4921875,81.490234375 L371.0136413574219,81.490234375", "M67.4609375,139.986328125 L67.4609375,142.3063201904297 L68.9131088256836,144.92039489746094 L68.984375,147.57296752929688 L68.984375,149.59564208984375 L68.984375,152.2919921875 L67.19488525390625,154.760986328125 L64.49364471435547,156.67514038085938 L62.142311096191406,158.80865478515625 L58.554298400878906,160.4697265625 L55.682464599609375,161.470703125 L54.70703125,161.470703125 L54.4921875,162.984375 L56.5357666015625,162.984375 L58.43358612060547,163.9853515625 L62.22168731689453,164.72509765625 L65.43871307373047,167.05789184570312 L68.717041015625,168.990234375 L71.34716796875,169.90106201171875 L72.47539520263672,169.9912109375", "M74.9609375,145.9921875 L77.20704650878906,147.2267303466797 L78.24292755126953,151.4007568359375 L79.4921875,158.85977172851562 L79.4921875,167.37429809570312 L79.4921875,172.55300903320312 L79.4921875,176.31228637695312 L79.4921875,178.76473999023438 L79.4921875,179.6435546875", "M104.9609375,171.48046875 L109.4014892578125,171.48046875 L123.66403198242188,171.48046875 L136.262939453125,171.48046875 L151.64474487304688,171.48046875 L166.51443481445312,171.48046875 L178.2447967529297,171.48046875 L196.47756958007812,171.48046875 L205.91314697265625,171.48046875 L216.8667755126953,171.48046875 L233.7597198486328,171.48046875 L253.77935791015625,170.0189208984375 L279.5076599121094,163.58782958984375 L301.60992431640625,156.57208251953125 L315.470703125,150.22512817382812 L324.6898193359375,146.61239624023438 L328.54193115234375,144.40670776367188 L330.1953125,142.720703125 L330.46875,144.3296661376953 L332.3013610839844,146.22702026367188 L331.953125,147.73300170898438 L332.96875,148.66452026367188 L332.96875,149.4833984375", "M67.4609375,214.4736328125 L68.984375,214.4736328125 L73.19164276123047,214.4736328125 L75.89225006103516,214.4736328125 L78.45195007324219,214.4736328125 L79.54613494873047,214.4736328125 L79.4921875,216.4188232421875 L77.98990631103516,218.70285034179688 L74.73564910888672,221.21871948242188 L70.71380615234375,223.66925048828125 L67.74203491210938,226.3006591796875 L65.06803131103516,227.86990356445312 L63.49609375,227.974609375 L62.46185302734375,229.47515869140625 L63.984375,228.9755859375 L65.15442657470703,228.9755859375 L67.19839477539062,228.9755859375 L68.8515625,229.88931274414062 L69.9609375,232.41824340820312 L69.9609375,235.0689697265625 L71.484375,236.16586303710938 L71.484375,238.21630859375 L71.484375,238.47265625 L69.9609375,238.90310668945312 L68.50687408447266,239.986328125 L65.81452178955078,239.986328125 L61.14192199707031,239.986328125 L57.356040954589844,239.986328125 L53.03310012817383,239.986328125 L52.96875,239.986328125", "M85.46875,198.970703125 L85.46875,203.3529052734375 L85.46875,205.40994262695312 L85.46875,209.95953369140625 L85.46875,213.21084594726562 L85.46875,215.88052368164062 L85.46875,219.51605224609375 L85.46875,222.16119384765625 L85.46875,224.16256713867188 L85.46875,226.91534423828125 L85.46875,229.25088500976562 L85.46875,230.10586547851562 L84.4921875,230.50656127929688 L84.4921875,232.21044921875", "M133.4765625,233.98046875 L131.484375,233.98046875 L132.4609375,232.466796875 L139.46597290039062,228.27474975585938 L145.9334716796875,227.974609375 L147.75390625,227.974609375 L156.04080200195312,227.974609375 L160.91812133789062,227.974609375 L162.24609375,227.974609375 L162.4609375,228.9755859375 L163.4765625,228.9755859375 L167.9119110107422,228.9755859375 L179.77496337890625,228.9755859375 L197.95167541503906,227.974609375 L208.28993225097656,227.41439819335938 L219.25238037109375,226.4853515625 L224.48306274414062,226.4853515625 L225.9765625,228.71963500976562 L225.9765625,232.06283569335938 L225.9765625,234.94256591796875 L225.9765625,235.48193359375 L225.9765625,235.982421875 L230.5430908203125,235.982421875 L240.69273376464844,229.70904541015625 L254.0059814453125,226.12435913085938 L263.8647155761719,223.970703125 L272.356689453125,222.9697265625 L277.62615966796875,222.9697265625 L278.9312744140625,222.9697265625 L279.4921875,222.9697265625 L279.9609375,222.9697265625 L281.5797424316406,222.9697265625 L289.1992492675781,222.9697265625 L293.7915954589844,222.9697265625 L297.3492126464844,222.9697265625 L297.96875,222.9697265625", "M80.9765625,288.9853515625 L81.9921875,288.9853515625 L103.12262725830078,288.9853515625 L129.31985473632812,288.9853515625 L156.27789306640625,288.9853515625 L168.82142639160156,288.9853515625 L179.58975219726562,288.9853515625 L183.16575622558594,288.9853515625 L183.984375,288.2709655761719 L183.984375,292.3146057128906 L183.984375,295.93109130859375 L183.984375,300.80169677734375 L185.0657196044922,305.11859130859375 L197.1536407470703,306.978515625 L209.79403686523438,306.978515625 L225.6252899169922,302.0828857421875 L234.59579467773438,297.4399719238281 L242.83438110351562,293.5467529296875 L245.76852416992188,292.4765625 L247.512939453125,292.4765625 L248.7064208984375,292.4765625 L247.96875,294.30438232421875 L248.83383178710938,295.81939697265625 L251.91983032226562,295.9677734375 L263.7666015625,295.9677734375 L277.8904724121094,295.9677734375 L288.8839111328125,294.9084777832031 L296.3488464355469,293.9658203125 L299.9306945800781,292.4765625", "M85.46875,386.470703125 L85.46875,387.4716796875 L99.491455078125,386.4540710449219 L119.2254638671875,384.4441833496094 L140.7846221923828,383.98046875 L157.9441680908203,383.98046875 L169.0208740234375,383.98046875 L177.8005828857422,389.79302978515625 L186.68173217773438,400.64239501953125 L193.10646057128906,409.63323974609375 L196.7399444580078,414.728759765625 L204.09356689453125,419.966796875 L212.89794921875,419.966796875 L227.24844360351562,419.1104736328125 L263.3934326171875,403.357666015625 L297.2015380859375,385.3992919921875 L309.6570129394531,378.1496276855469 L323.61090087890625,370.40155029296875 L329.793212890625,367.7589416503906 L330.53173828125,367.96484375", "M168.4765625,464.4736328125 L168.4765625,462.9599609375 L187.31173706054688,449.6668701171875 L205.92132568359375,438.18634033203125 L219.76316833496094,430.51495361328125 L243.46678161621094,424.083251953125 L256.0820007324219,423.482421875 L263.2977600097656,423.482421875 L266.7254333496094,424.4833984375 L266.953125,426.71728515625 L269.4104309082031,429.39227294921875 L278.3529968261719,434.77642822265625 L301.9308776855469,444.56524658203125 L340.6269226074219,452.4619140625 L378.3670349121094,453.462890625 L399.4587097167969,453.462890625 L414.0425720214844,449.95465087890625 L423.3368225097656,446.92742919921875 L426.28607177734375,446.48046875 L427.8869323730469,446.48046875 L428.7109375,446.48046875", "M470.9765625,54.9765625 L485.43212890625,46.946014404296875 L503.96990966796875,40.22309875488281 L516.9869384765625,38.1934814453125 L524.5358276367188,37.984375 L534.8280639648438,37.984375 L536.484375,37.984375 L536.953125,41.037200927734375 L536.953125,44.47328186035156 L536.953125,46.21910095214844 L538.725830078125,46.48046875 L551.9337768554688,45.651702880859375 L580.536376953125,34.82746887207031 L607.7509155273438,23.182510375976562 L616.5205688476562,18.93634796142578 L631.5537109375,13.746437072753906 L638.7705078125,11.155479431152344 L639.6898193359375,11.4951171875 L640.6123657226562,11.4951171875 L638.0245361328125,11.4951171875 L636.953125,11.4951171875", "M485.46875,79.9765625 L498.13275146484375,79.9765625 L515.2130737304688,79.9765625 L537.8301391601562,79.9765625 L557.4734497070312,79.9765625 L581.8198852539062,82.4334716796875 L602.9578857421875,91.04356384277344 L622.65869140625,104.90425109863281 L633.0941162109375,111.24287414550781 L641.3011474609375,115.90658569335938 L649.1444702148438,118.51741027832031 L655.6033935546875,118.4775390625 L662.5704345703125,109.87553405761719 L672.828857421875,96.76918029785156 L682.1353759765625,86.62568664550781 L688.7808837890625,79.9869384765625 L692.66259765625,74.77947998046875 L694.453125,73.25225830078125 L694.453125,72.505859375", "M499.9609375,162.984375 L502.9276123046875,162.984375 L508.418701171875,160.4862060546875 L524.7631225585938,157.9794921875 L540.2250366210938,157.9794921875 L550.3958129882812,157.9794921875 L560.3740234375,157.9794921875 L566.8360595703125,159.3812255859375 L572.0580444335938,163.04788208007812 L578.5658569335938,166.89852905273438 L593.66455078125,171.7784423828125 L610.5032958984375,172.4814453125 L626.511474609375,172.4814453125 L643.0918579101562,168.67233276367188 L656.8984985351562,161.468017578125 L668.08984375,152.20416259765625 L674.7351684570312,146.44622802734375 L678.9156494140625,142.52684020996094 L681.5751342773438,141.38803100585938", "M526.4453125,252.974609375 L531.989013671875,248.46340942382812 L545.2659912109375,241.59829711914062 L560.5753784179688,237.4716796875 L574.62841796875,234.10076904296875 L588.4255981445312,233.98046875 L601.3255004882812,233.98046875 L607.1484985351562,236.11416625976562 L611.9967041015625,238.69342041015625 L614.1082763671875,241.15432739257812 L614.6688842773438,241.98828125 L614.9609375,243.40139770507812 L623.1605834960938,245.2706298828125 L644.5182495117188,246.72311401367188 L662.9171752929688,246.96875 L676.3140258789062,246.96875 L687.6148071289062,243.40090942382812 L692.3477783203125,240.82928466796875 L694.7119750976562,239.72100830078125 L695.46875,238.11935424804688 L695.46875,236.36700439453125 L695.46875,235.982421875", "M646.4453125,287.984375 L655.1448974609375,294.32843017578125 L663.0548095703125,305.2881164550781 L663.4765625,306.8824768066406 L663.4765625,307.4787292480469 L664.453125,306.978515625 L666.2801513671875,306.978515625 L669.3724975585938,306.978515625 L675.0982666015625,305.05035400390625 L685.0703125,301.4755859375 L697.097412109375,295.47601318359375 L709.7755737304688,289.06207275390625 L722.4165649414062,281.7077941894531 L741.7749633789062,269.93096923828125 L752.3301391601562,265.427001953125 L758.9185791015625,263.5718078613281 L764.5003051757812,262.4716796875 L765.704833984375,262.4716796875", "M630.9765625,363.47265625 L625.5075073242188,363.47265625 L614.7438354492188,363.47265625 L594.0187377929688,363.47265625 L581.5256958007812,363.47265625 L571.0281982421875,363.47265625 L563.2367553710938,363.47265625 L560.763916015625,363.47265625 L560.9765625,364.77288818359375 L560.9765625,372.3674011230469 L561.7196655273438,383.224609375 L563.4765625,389.0873718261719 L565.698486328125,395.2859191894531 L565.9765625,398.303955078125 L566.953125,401.9320068359375 L566.953125,405.708984375 L566.953125,405.96533203125 L566.953125,406.93798828125 L565.9765625,406.4658203125 L556.0709838867188,389.8750915527344 L551.4453125,382.466796875", "M823.9453125,76.4853515625 L823.9453125,77.486328125 L823.9453125,81.76583862304688 L823.9453125,94.93527221679688 L823.9453125,123.60208129882812 L823.9453125,158.4730224609375 L823.9453125,170.43438720703125 L823.9453125,183.98419189453125 L823.9453125,191.24169921875 L823.9453125,193.74609375 L830.5117797851562,191.25503540039062 L838.884033203125,189.18875122070312 L842.785400390625,188.97784423828125 L847.4959106445312,187.984375", "M577.96875,432.9794921875 L586.28173828125,432.42462158203125 L604.1426391601562,428.9754638671875 L627.3517456054688,425.97265625 L649.79345703125,425.97265625 L670.0604248046875,425.97265625 L680.365234375,425.97265625 L688.0911865234375,428.779541015625 L690.5387573242188,429.4638671875 L691.73828125,429.4638671875 L695.22705078125,419.2061767578125 L706.3212280273438,399.7115478515625 L721.2945556640625,369.8646545410156 L726.953125,352.4619140625"};
	 	convertSvgPathsToSinglePng( arr,pngFilePath );
		System.out.println("Starting EMR Service");
	}

}
